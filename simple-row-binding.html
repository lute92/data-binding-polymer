<html>

<head>
    <script src="./bower_components/webcomponentsjs/webcomponents-lite.js"></script>
    <link rel="import" href="./my-row-template.html">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</head>

<body>
    <div>
        <personal-records id="myPersonalRecords"></personal-records>
    </div>
    <script>
        $(document).ready(function() {

            function getAllPersons() {
                return new Promise((resolve, reject) => {
                    const _url = "http://localhost:4000/api/person"
                    $.ajax({
                        type: 'GET',
                        url: _url,
                        success: function(result) {
                            resolve(result);
                        },
                        error: function(error) {
                            reject(error);
                        }
                    });
                });

            }

            getAllPersons().then((personList) => {
                var myCustom = document.querySelector("#myPersonalRecords");
                myCustom.persons = personList;
            }).catch((err) => {
                //throw new Error(err);
            })


        })
    </script>
</body>

</html>